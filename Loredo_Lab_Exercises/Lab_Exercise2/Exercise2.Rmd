---
title: "Exercise2"
author: "Natalie Joy Loredo"
date: "2024-02-28"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#Scrape 50 Products
library(rvest)
library(dplyr)
library(polite)
library(stringr) 
library(httr)

url <- "https://www.amazon.co.uk/s?bbn=560798&rh=n%3A4085761&fs=true&ref=lp_4085761_sar"
session <- bow(url, user_agent = "For Educational Purposes ")
session
```

```{r}
library(rvest)
library(stringr)
library(httr) 
library(dplyr)

session1 <- session("https://www.amazon.co.uk/s?bbn=560798&rh=n%3A4085761&fs=true&ref=lp_4085761_sar")
```
Names
```{r}
Name <- session1 %>%
  html_nodes("span.a-size-base-plus.a-color-base.a-text-normal") %>%
  html_text()

Names<- Name[1:50]
Names
```
50 Names of Reviewers
```{r}
#25 Names of Reviewers
url  <-"https://www.amazon.co.uk/s?bbn=560798&rh=n%3A4085761&fs=true&ref=lp_4085761_sar "
  session  <-bow(url, user_agent = "For Educational Purposes")
  session

  session_1 <-session("https://www.amazon.co.uk/s?bbn=560798&rh=n%3A4085761&fs=true&ref=lp_4085761_sar ")
```

```{r}
#25 Product Names
Name1  <- session_1 %>%
  html_nodes("span.a-size-base-plus.a-color-base.a-text-normal") %>%
  html_text()

Names1 <- Name1[1:25]
Names1
```

```{r}
#25 products with Individual Rating and Date
Rate_date <- session_1 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

Ratedates<- Rate_date[1:25]
Ratedates
```

```{r}
#25 Types of Purchases
Type_purchase <- session_1 %>%
  html_nodes("span.a-size-mini.a-color-state.a-text-bold") %>%
  html_text()

Types<- Type_purchase[1:25]
Types
```

```{r}
#25 Reviews
Reviews <- session_1 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

Rev<- Reviews[1:25]
Rev
```

```{r}
frame1  <- data.frame(
  Name = Names1,
  Rating_and_Date = Ratedates, 
  Type_of_Purchase = Types,
  Reviews = Rev
)
frame1
```
```{r}
write.csv(frame1, "First25Product.csv")

read.csv("First25Product.csv")
```

```{r}
#25 Name of reviewers

  url1 <- "https://www.amazon.co.uk/s?bbn=560798&rh=n%3A15488758031&language=en_GB&_encoding=UTF8&brr=1&content-id=amzn1.sym.c6fcbfa3-a0cb-49d1-be17-9aeb9a6d61f8&pd_rd_r=0adc0ff2-4259-4fcc-8d68-6eb71d9bce33&pd_rd_w=W7QFn&pd_rd_wg=sbk9d&pf_rd_p=c6fcbfa3-a0cb-49d1-be17-9aeb9a6d61f8&pf_rd_r=RPNSP1E1HKWW7695JR5A&rd=1&ref=Oct_d_odnav_d_4085731_0"

  session <- bow(url1, user_agent = "For Educational Purposes")
  session

  session2 <- session("https://www.amazon.co.uk/s?bbn=560798&rh=n%3A15488758031&language=en_GB&_encoding=UTF8&brr=1&content-id=amzn1.sym.c6fcbfa3-a0cb-49d1-be17-9aeb9a6d61f8&pd_rd_r=0adc0ff2-4259-4fcc-8d68-6eb71d9bce33&pd_rd_w=W7QFn&pd_rd_wg=sbk9d&pf_rd_p=c6fcbfa3-a0cb-49d1-be17-9aeb9a6d61f8&pf_rd_r=RPNSP1E1HKWW7695JR5A&rd=1&ref=Oct_d_odnav_d_4085731_0")
```

```{r}
#25 Product names

Name1 <- session2 %>%
  html_nodes("span.a-size-base-plus.a-color-base.a-text-normal") %>%
  html_text()

Names1<- Name1[1:25]
Names1
```

```{r}
#25 Individual Rating and Date
Rate_date1 <- session2 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()
Rate_dates1<- Rate_date1[1:25]
Rate_dates1
```

```{r}
#25 Types of Purchase
Type_Purchase1 <- session2 %>%
  html_nodes("span.a-size-mini.a-color-state.a-text-bold") %>%
  html_text()

Types1<- Type_Purchase1[1:25]
Types1
```

```{r}
#25 Reviews
Review1 <- session2 %>%
  html_nodes("span.a-icon-alt") %>%
  html_text()

Reviews1<- Review1[1:25]
Reviews1
```

```{r}
frame2 <- data.frame(
  Name = Names1,
  Rating_and_Date = Rate_dates1,
  Type_of_Purchase = Types1,
  Reviews = Reviews1
)
frame2
```
```{r}
write.csv(frame2, "Second25Products.csv")

read.csv("Second25Products.csv")
```

```{r}
Reviewsdf <- bind_rows( frame1, 
                        frame2)

Reviewsdf
```

```{r}
write.csv(Reviewsdf, "50ProductReviews.csv")

read.csv("50ProductReviews.csv")
```
